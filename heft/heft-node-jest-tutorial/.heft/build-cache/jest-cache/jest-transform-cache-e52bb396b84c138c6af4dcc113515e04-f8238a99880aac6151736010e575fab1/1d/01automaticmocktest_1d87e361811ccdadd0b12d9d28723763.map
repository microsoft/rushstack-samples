{"version":3,"file":"C:\\Git\\rushstack-samples\\heft\\heft-node-jest-tutorial\\src\\guide\\01-automatic-mock.test.ts","sources":["C:\\Git\\rushstack-samples\\heft\\heft-node-jest-tutorial\\src\\guide\\01-automatic-mock.test.ts"],"names":[],"mappings":";AAAA,oDAAoD;AACpD,2DAA2D;;AAE3D,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,wCAAwC;AAEpE,+CAA4C;AAC5C,+DAA4D;AAE5D,UAAU,CAAC,GAAG,EAAE;IACd,gEAAgE;IAChE,MAAM,CAAC,yBAAW,CAAC,CAAC,SAAS,EAAE,CAAC;AAClC,CAAC,CAAC,CAAC;AAEH,EAAE,CAAC,2DAA2D,EAAE,GAAG,EAAE;IACnE,IAAI,yCAAmB,EAAE,CAAC;IAC1B,MAAM,CAAC,yBAAW,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;AAC/C,CAAC,CAAC,CAAC;AAEH,EAAE,CAAC,oEAAoE,EAAE,GAAG,EAAE;IAC5E,oCAAoC;IACpC,MAAM,CAAC,yBAAW,CAAC,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC;IAE3C,MAAM,mBAAmB,GAAwB,IAAI,yCAAmB,EAAE,CAAC;IAC3E,6CAA6C;IAC7C,MAAM,CAAC,yBAAW,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;IAE7C,MAAM,iBAAiB,GAAW,UAAU,CAAC;IAC7C,mBAAmB,CAAC,iBAAiB,EAAE,CAAC;IAExC,oDAAoD;IACpD,MAAM,uBAAuB,GAAgB,MAAM,CAAC,yBAAW,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IAEnF,MAAM,iBAAiB,GAAG,MAAM,CAAC,uBAAuB,CAAC,aAAa,CAAC,CAAC;IACxE,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;IAEtE,6BAA6B;IAC7B,MAAM,CAAC,iBAAiB,CAAC,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,CAAC;IAClE,MAAM,CAAC,iBAAiB,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;AACrD,CAAC,CAAC,CAAC","sourcesContent":["// This example is adapted from the Jest guide here:\r\n// https://jestjs.io/docs/en/es6-class-mocks#automatic-mock\r\n\r\njest.mock('./SoundPlayer'); // SoundPlayer is now a mock constructor\r\n\r\nimport { SoundPlayer } from './SoundPlayer';\r\nimport { SoundPlayerConsumer } from './SoundPlayerConsumer';\r\n\r\nbeforeEach(() => {\r\n  // Clear all instances and calls to constructor and all methods:\r\n  mocked(SoundPlayer).mockClear();\r\n});\r\n\r\nit('We can check if the consumer called the class constructor', () => {\r\n  new SoundPlayerConsumer();\r\n  expect(SoundPlayer).toHaveBeenCalledTimes(1);\r\n});\r\n\r\nit('We can check if the consumer called a method on the class instance', () => {\r\n  // Show that mockClear() is working:\r\n  expect(SoundPlayer).not.toHaveBeenCalled();\r\n\r\n  const soundPlayerConsumer: SoundPlayerConsumer = new SoundPlayerConsumer();\r\n  // Constructor should have been called again:\r\n  expect(SoundPlayer).toHaveBeenCalledTimes(1);\r\n\r\n  const coolSoundFileName: string = 'song.mp3';\r\n  soundPlayerConsumer.playSomethingCool();\r\n\r\n  // mock.instances is available with automatic mocks:\r\n  const mockSoundPlayerInstance: SoundPlayer = mocked(SoundPlayer).mock.instances[0];\r\n\r\n  const mockPlaySoundFile = mocked(mockSoundPlayerInstance.playSoundFile);\r\n  expect(mockPlaySoundFile.mock.calls[0][0]).toEqual(coolSoundFileName);\r\n\r\n  // Equivalent to above check:\r\n  expect(mockPlaySoundFile).toHaveBeenCalledWith(coolSoundFileName);\r\n  expect(mockPlaySoundFile).toHaveBeenCalledTimes(1);\r\n});\r\n"]}